<html
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:cb="http://typo3.org/ns/TYPO3/CMS/ContentBlocks/ViewHelpers"
    xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
    data-namespace-typo3-fluid="true"
>

<cb:asset.css identifier="cbAccordionCssBackend" file="EditorPreview.css"/>

<div class="cb-accordion">
    <f:render section="header" arguments="{_all}"></f:render>
    {f:if(condition:'{data.pi_flexform.hasSubAccordeon}', then:'<b>Has Child Acorddeons</b>')}
    <f:for each="{data.accordions}" as="item">
        <be:link.editRecord uid="{item.uid}" table="{item.tableName}">
            <div class="accordion-item">
                {item.header}
            </div>
        </be:link.editRecord>
    </f:for>
</div>
<f:section name="header">
    <f:switch expression="{data.header_layout}">
        <f:case value="1">
            <h1 class="cb-accordion-header-{data.header_class}">{data.header}</h1>
        </f:case>
        <f:case value="2">
            <h2 class="cb-accordion-header-{data.header_class}">{data.header}</h2>
        </f:case>
        <f:case value="3">
            <h3 class="cb-accordion-header-{data.header_class}">{data.header}</h3>
        </f:case>
        <f:case value="4">
            <h4 class="cb-accordion-header-{data.header_class}">{data.header}</h4>
        </f:case>
    </f:switch>

</f:section>

</html>
